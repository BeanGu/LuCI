<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008-2009 Jo-Philipp Wich <xm@subsignal.org>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id$

-%>

<%+header%>

<% math.randomseed( os.time() ) %>

<% if step == 1 then %>

<form method="post" action="<%=REQUEST_URI%>?step=2&#38;from=1" >
	<div>
		<script type="text/javascript" src="/luci-static/resources/cbi.js"></script>
		<input type="hidden" name="cbi.submit" value="1" />
	</div>

	<div class="cbi-map" id="cbi-wizard">

		<h2><a id="content" name="content">设置向导</a></h2>
		<div class="cbi-map-descr">请选择接入类型并设置好相应帐号</div>
		<fieldset class="cbi-section">
			
			<div class="cbi-section-node" id="cbi-wizard-0x8328f30">
				<div class="cbi-value" id="cbi-wizard-1-ctype"><label class="cbi-value-title" for="cbid.wizard.1.ctype">请选择接入类型</label>
		<div class="cbi-value-field">


	<select class="cbi-input-select" onchange="cbi_d_update(this.id)" id="cbid.wizard.1.ctype" name="cbid.wizard.1.ctype" size="1">
	<option id="cbi-wizard-1-ctype-single" value="single"  <% if ctype =='single' then %>selected='selected' <% end %> >单接入</option>
   <option id="cbi-wizard-1-ctype-double" value="double"  <% if ctype =='double' then %>selected='selected' <% end%> > 双接入</option>
	</select>


</div></div>





			</div>

			<br />
		</fieldset><fieldset class="cbi-section">
			<legend>接入1设置</legend>
			<div class="cbi-section-node" id="cbi-wizard-0x832b2a0">
				<div class="cbi-value" id="cbi-wizard-1-proto"><label class="cbi-value-title" for="cbid.wizard.1.proto">接入方式</label>
		<div class="cbi-value-field">


	<select class="cbi-input-select" onchange="cbi_d_update(this.id)" id="cbid.wizard.1.proto" name="cbid.wizard.1.proto" size="1">

	<option id="cbi-wizard-1-proto-802.11" value="802.1x" <% if proto =='802.1x' then %>selected='selected' <% end %> >校园网802.1x</option>
    <option id="cbi-wizard-1-proto-pppoe" value="pppoe"  <% if proto =='pppoe' then %>selected='selected' <% end %>   >宽带</option>
	</select>


</div></div>

<script type="text/javascript" id="cbip-wizard-1-proto">
		cbi_d_add("cbi-wizard-1-proto", {"cbid.wizard.1.ctype":"single"}, "cbip-wizard-1-proto");cbi_d_add("cbi-wizard-1-proto", {"cbid.wizard.1.ctype":"double"}, "cbip-wizard-1-proto");
	</script>


<div class="cbi-value" id="cbi-wizard-1-username"><label class="cbi-value-title" for="cbid.wizard.1.username">用户名</label>

		<div class="cbi-value-field">

	<input type="text" class="cbi-input-text" onchange="cbi_d_update(this.id)" name="cbid.wizard.1.username" id="cbid.wizard.1.username" value="<%=username%>" />
	
</div></div>

<script type="text/javascript" id="cbip-wizard-1-username">
		cbi_d_add("cbi-wizard-1-username", {"cbid.wizard.1.ctype":"single"}, "cbip-wizard-1-username");cbi_d_add("cbi-wizard-1-username", {"cbid.wizard.1.ctype":"double"}, "cbip-wizard-1-username");
	</script>


<div class="cbi-value" id="cbi-wizard-1-pw"><label class="cbi-value-title" for="cbid.wizard.1.pw">密码</label>
		<div class="cbi-value-field">

	<input type="password" class="cbi-input-password" onchange="cbi_d_update(this.id)" name="cbid.wizard.1.pw" id="cbid.wizard.1.pw" value="<%=pw%>" />
	
</div></div>

<script type="text/javascript" id="cbip-wizard-1-pw">
		cbi_d_add("cbi-wizard-1-pw", {"cbid.wizard.1.ctype":"single"}, "cbip-wizard-1-pw");cbi_d_add("cbi-wizard-1-pw", {"cbid.wizard.1.ctype":"double"}, "cbip-wizard-1-pw");
	</script>



			</div>
			<br />

		</fieldset>

        <fieldset class="cbi-section" id="cbi-section-2" >

			<legend>接入2设置</legend>
			<div class="cbi-section-node" id="cbi-wizard-0x8329dd0">
				<div class="cbi-value" id="cbi-wizard-1-proto2"><label class="cbi-value-title" for="cbid.wizard.1.proto2">接入方式</label>
		<div class="cbi-value-field">


	<select class="cbi-input-select" onchange="cbi_d_update(this.id)" id="cbid.wizard.1.proto2" name="cbid.wizard.1.proto2" size="1">
	<option id="cbi-wizard-1-proto2-802.11" value="802.1x"   <% if proto2 =='802.1x' then %> selected='selected' <% end %> >校园网802.1x</option>
<option id="cbi-wizard-1-proto2-pppoe" value="pppoe" <% if proto2 =='pppoe' then %>selected='selected' <% end %> >宽带</option>

	</select>


</div></div>

<script type="text/javascript" id="cbip-wizard-1-proto2">
		cbi_d_add("cbi-wizard-1-proto2", {"cbid.wizard.1.ctype":"double"}, "cbip-wizard-1-proto2");
	</script>


<div class="cbi-value  " id="cbi-wizard-1-username2"><label class="cbi-value-title" for="cbid.wizard.1.username2">用户名2</label>
		<div class="cbi-value-field">

	<input type="text" class="cbi-input-text" onchange="cbi_d_update(this.id)" name="cbid.wizard.1.username2" id="cbid.wizard.1.username2" value="<%=username2%>" />
	
</div></div>

<script type="text/javascript" id="cbip-wizard-1-username2">
		cbi_d_add("cbi-wizard-1-username2", {"cbid.wizard.1.ctype":"double"}, "cbip-wizard-1-username2");
	</script>


<div class="cbi-value" id="cbi-wizard-1-pw2"><label class="cbi-value-title" for="cbid.wizard.1.pw2">密码2</label>
		<div class="cbi-value-field">

	<input type="password" class="cbi-input-password" onchange="cbi_d_update(this.id)" name="cbid.wizard.1.pw2" id="cbid.wizard.1.pw2" value="<%=pw2%>" />

	
</div></div>

<script type="text/javascript" id="cbip-wizard-1-pw2">
		cbi_d_add("cbi-wizard-1-pw2", {"cbid.wizard.1.ctype":"double"}, "cbip-wizard-1-pw2");
	</script>



			</div>
			<br />
		</fieldset>
<script type="text/javascript" id="cbip-section-2" >
		cbi_d_add("cbi-section-2", {"cbid.wizard.1.ctype":"double"}, "cbip-section-2");
</script>
		<br />

	</div>
	

	<div>

		<input class="cbi-button-save" type="submit" value="下一步" name="submit"/>


		<input class="cbi-button-reset" type="reset" value="取消" onclick="location.href='/' " />

		<script type="text/javascript">cbi_d_update();</script>
	</div>

</form>

<% elseif step == 2 then %>
<form method="post" action="<%=REQUEST_URI%>?step=3&#38;from=2">
	<div>
		<script type="text/javascript" src="/luci-static/resources/cbi.js"></script>
		<input type="hidden" name="cbi.submit" value="1" />
	</div>

	<div class="cbi-map" id="cbi-abc">
		<h2><a id="content" name="content">设置向导</a></h2>

		<div class="cbi-map-descr">是否开启掉线通知？</div>
		<fieldset class="cbi-section">
			
			<div class="cbi-section-node" id="cbi-abc-0x9ac6b28">
				<div class="cbi-value" id="cbi-abc-1-offlinenotify"><label class="cbi-value-title" for="cbid.abc.1.offlinenotify">开启掉线通知</label>
		<div class="cbi-value-field">

	<input class="cbi-input-checkbox" onclick="cbi_d_update(this.id)" onchange="cbi_d_update(this.id)" type="checkbox" id="cbid.abc.1.offlinenotify" name="cbid.abc.1.offlinenotify" <% if offlinenotify ~= "0" then %> checked='checked' <% end %> />

</div></div>





			</div>
			<br />
		</fieldset>
		<br />
	</div>
	

	<div>
	    <input class="cbi-button-save" type="submit" value="下一步" /> 
<% math.randomseed( os.time() ) %>
		<input class="cbi-button-save" type="submit" value="上一步" onclick="location.href='<%=REQUEST_URI%>?step=1&#38;token=<%=math.random(8808)%>'; return false" />


		<input class="cbi-button-reset" type="reset" value="取消"  onclick="location.href='/' " />

		<script type="text/javascript">cbi_d_update();</script>
	</div>
</form>
<% elseif step == 3 then %>

<form method="post" action="<%=REQUEST_URI%>?step=4&#38;from=3">
	<div>
		<script type="text/javascript" src="/luci-static/resources/cbi.js"></script>
		<input type="hidden" name="cbi.submit" value="1" />
	</div>

	<div class="cbi-map" id="cbi-abc">
		<h2><a id="content" name="content">设置向导</a></h2>

		<div class="cbi-map-descr">无线网络设置</div>
		<fieldset class="cbi-section">
			
			<div class="cbi-section-node" id="cbi-abc-0x9a95d20">
				<div class="cbi-value" id="cbi-abc-1-SSID"><label class="cbi-value-title" for="cbid.abc.1.SSID">无线网络名称</label>
		<div class="cbi-value-field">

	<input type="text" class="cbi-input-text" onchange="cbi_d_update(this.id)" name="cbid.abc.1.SSID" id="cbid.abc.1.SSID" value="<%=SSID%>" />
	
</div></div>




<div class="cbi-value" id="cbi-abc-1-encrypt"><label class="cbi-value-title" for="cbid.abc.1.encrypt">是否加密</label>
		<div class="cbi-value-field">


	<select class="cbi-input-select" onchange="cbi_d_update(this.id)" id="cbid.abc.1.encrypt" name="cbid.abc.1.encrypt" size="1">
	<option id="cbi-abc-1-encrypt-yes" value="yes" <% if  encrypt=='yes' then %>selected='selected' <% end %> >加密</option>
    <option id="cbi-abc-1-encrypt-no" value="no" <% if  encrypt=='no' then %>selected='selected' <% end %> >不加密</option>
	</select>


</div></div>




<div class="cbi-value" id="cbi-abc-1-pw"><label class="cbi-value-title" for="cbid.abc.1.pw">密码</label>
		<div class="cbi-value-field">

	<input type="password" class="cbi-input-password" onchange="cbi_d_update(this.id)" name="cbid.abc.1.pw" id="cbid.abc.1.pw" value="<%=wifipw%>" />
	
</div></div>

<script type="text/javascript" id="cbip-abc-1-pw">
		cbi_d_add("cbi-abc-1-pw", {"cbid.abc.1.encrypt":"yes"}, "cbip-abc-1-pw");
	</script>



			</div>
			<br />
		</fieldset>
		<br />
	</div>

	

	<div>
	    <input class="cbi-button-save" type="submit" value="完成" /> 
		<input class="cbi-button-save" type="submit" value="上一步" onclick="location.href='<%=REQUEST_URI%>?step=2&#38;token=<%=math.random(8808)%>'; return false" />


		<input class="cbi-button-reset" type="reset" value="取消" onclick="location.href='/' "  />

		<script type="text/javascript">cbi_d_update();</script>
	</div>
</form>
<% elseif step == 4 then %>
<div class="cbi-map" id="cbi-abc">
		<h2><a id="content" name="content">Well蛋！</a></h2>

		<fieldset class="cbi-section">		
			<div class="cbi-section-node" id="cbi-abc-0x9a95d20">
				<div class="cbi-value" id="cbi-abc-1-SSID">所有设置已经完毕，路由器已可正常使用。</div>
		   </div>
        </fieldset>
</div>
        
<% end %>
<%+footer%>

